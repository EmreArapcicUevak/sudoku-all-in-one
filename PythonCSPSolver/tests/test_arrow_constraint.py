from PythonCSPSolver.sudoku_solver import solve

def test_arrow_constraint():
  grid = [
    [0,0,0,0,5,0,0,0,1],
    [0,0,7,0,0,0,0,0,0],
    [0,5,0,4,0,8,0,0,2],
    [0,0,6,0,7,3,1,0,5],
    [0,0,0,0,0,0,0,8,7],
    [0,7,0,0,0,0,6,0,9],
    [5,9,0,0,0,0,0,0,4],
    [0,0,0,9,0,0,0,0,0],
    [0,8,0,0,4,5,0,1,0],
  ]

  additional_constraints = [
    ("arrow", ['X11', 'X21', 'X22']),
    ("arrow", ['X33', 'X43', 'X42', 'X31']),
    ("arrow", ['X41', 'X51', 'X52', 'X63', 'X73']),
    ("arrow", ['X82','X93', 'X83']),
    ("arrow", ['X36', 'X25', 'X14']),
    ("arrow", ['X44', 'X35', 'X24', 'X34']),
    ("arrow", ['X54', 'X64', 'X65']),
    ("arrow", ['X55', 'X45', 'X56']),
    ("arrow", ['X84', 'X95', 'X96']),
    ("arrow", ['X29', 'X19', 'X28', 'X17']),
    ("arrow", ['X58', 'X57', 'X47', 'X48']),
    ("arrow", ['X59', 'X49', 'X39']),
    ("arrow", ['X67','X68','X79']),
    ("arrow", ['X97','X86','X76','X87']),
    ("arrow", ['X99','X98','X88']),
  ]

  assert solve(grid, additional_constraints) == [
    [6, 3, 8, 2, 5, 7, 4, 9, 1],
    [2, 4, 7, 1, 6, 9, 5, 3, 8],
    [1, 5, 9, 4, 3, 8, 7, 6, 2],
    [9, 2, 6, 8, 7, 3, 1, 4, 5],
    [4, 1, 5, 6, 9, 2, 3, 8, 7],
    [8, 7, 3, 5, 1, 4, 6, 2, 9],
    [5, 9, 1, 3, 2, 6, 8, 7, 4],
    [7, 6, 4, 9, 8, 1, 2, 5, 3],
    [3, 8, 2, 7, 4, 5, 9, 1, 6],
  ]